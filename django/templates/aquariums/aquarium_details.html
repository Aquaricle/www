{% include "header.html" %}

<h2>{{ aquarium }}</h2>

<ul>
	<li><strong>Location:</strong> {{ aquarium.location }}</li>
	<li><strong>Capacity:</strong> {{ aquarium.capacity }} {{ volumeUnit }}
		({{ aquarium.length}} {{ distanceUnit }}
		x 
		{{ aquarium.width }} {{ distanceUnit }}
		x 
		{{ aquarium.height }} {{ distanceUnit }})</li>
	<li><strong>Active Since:</strong> {{ aquarium.activeSince }}</li>
	<li>
		<strong>Aquarium Profile:</strong>
		<a href="/aquariums/profiles/{{ aquarium.aquariumProfileID.aquariumProfileID }}">
			{{ aquarium.aquariumProfileID }}
		</a>
	</li>
	{% for entry in last_water_change %}
	<li>
			<strong>Last Water Change:</strong>
			{{ entry.testedOn}} ({{ entry.daysSinceChange }} days ago),
			 {{ entry.amountExchanged }} litters ({{ entry.exchangedPercentage }}%)
	</li>
	{% endfor %}
</ul>

<div id="graph">
<a href="/static/graphs/{{ aquarium.aquariumID }}-temps-full.png">
<img src="/static/graphs/{{ aquarium.aquariumID }}-temps-thumb.png" alt="Temperature Graph" />
</a>
<br />
<a href="/static/graphs/{{ aquarium.aquariumID }}-relays-full.png">
<img src="/static/graphs/{{ aquarium.aquariumID }}-relays-thumb.png" alt="Relays Graph" />
</a>
<br />

</div>

<div id="equipment">
<h3>Equipment Maintenance Schedule</h3>

<table>
	<tr>
		<th rowspan="2">Name</th>
		<th colspan="3">Maintenance</th>
	</tr>
	<tr>
		<th>Interval (Days)</th>
		<th>Last</th>
		<th>Days Since</th>
	</tr>
	{% for item in equipment %}
		<tr class="{% cycle 'odd' 'even' %}">
			<td class="equipmentMaintName">
				{% comment %}
					{% if item.url %}
						<a class="equipment" href="{{ item.url }}">{{ item.name }}</a>
						{% else %}
						{{ item.name }}
						{% endif %}
				{% endcomment %}
				<a class="equipment" href="/equipment/{{ item.equipmentID }}/">
					{{ item.name }}
				</a>
			</td>
			<td class="equipmentMaintInterval">
				{% if item.maintenanceInterval %}
					{{ item.maintenanceInterval }}
				{% else %}
					N/A
				{% endif %}
			</td>
			<td class="equipmentMaintLast">
				{% if item.lastMaint %}
					{% if item.maintenance = 'Yes' %}
						{{ item.lastMaint }}
					{% else %}
						None Yet Performed
					{% endif %}
				{% else %}
					&nbsp;
				{% endif %}
			</td>
			{% if item.daysSinceMaint != None and item.maintenance = 'Yes' %}
				{% if item.daysSinceMaint > item.maintenanceInterval %}
					<td class="equipmentMaintOverdue">
				{% else %}
					<td class="equipmentMaintSince">
				{% endif %}
				{{ item.daysSinceMaint }}
				</td>
			{% else %}
				<td>&nbsp;</td>
			{% endif %}
		</tr>
    {% empty %}
	<tr><td colspan="4">No Equipment Found</td></tr>
	{% endfor %}
</table>
<br />
<a href="/equipment/aquarium/{{ aquarium.aquariumID }}">Full Equipment List</a>
</div>

<div id="aquariumLife">
<h3>Life</h3>

<table>
	<tr>
		<th class="lifeNickname">Nickname</th>
		<th class="lifeCommonName">Common Name</th>
		<th class="lifeKind">Kind</th>
		<th class="lifeDateAdded">Added</th>
	</tr>
	{% for item in life %}
		<tr class="{% cycle 'odd' 'even' %}">
			<td><a class="life" href="/life/{{ item.lifeID }}">{{ item.nickname }}</td>
			<td>{{ item.lifeTypeID.commonName }}</td>
			<td>{{ item.lifeTypeID.kind }}</td>
			<td>{{ item.dateAdded }}</td>
		</tr>
	{% empty %}
    	<tr><td colspan="3">No Living Creatures</td></tr>
	{% endfor %}
</table>
<br />
<table>
	<tr>
		<th>Kind</th>
		<th>Count</th>
	</tr>
	{% for kind in life_kind_summary %}
		<tr class="{% cycle 'odd' 'even' %}">
			<td>{{ kind.kind }}</td>
			<td>{{ kind.kindCount }}</td>
		</tr>
	{% empty %}
		<tr><td colspan="2">No Living Creatures</td></tr>
	{% endfor %}
</table>
<br />
<a href="/life/aquarium/{{ aquarium.aquariumID }}">Full Life History</a>
</div>

<div id="logs">
	<h3>Latest Log Entries</h3>
	
	<table>
			<tr>
				<th>Date</th>
				<th>Summary</th>
			</tr>
			{% for log in logs %}
				<tr class="{% cycle 'odd' 'even' %}">
					<td>{{ log.logDate }}</td>
					<td>{{ log.summary }}</td>
				</tr>
			{% empty %}
				<tr><td colspan="2">No Living Creatures</td></tr>
			{% endfor %}
	</table>
	<br />
	<a href="/aquariums/log/add">Add New Entry</a>
</div>

{% include "footer.html" %}
